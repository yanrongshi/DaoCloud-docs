# 组件监控

!!! note

    集群中需要[安装 insight-agent 组件](../../../../insight/quickstart/install/install-agent.md)后才能使用监控功能。

微服务引擎通过内置 Grafana 提供全方位的监控功能，覆盖各个微服务、系统组件、以及服务调用链路等监控对象。
其中，组件监控功能可以提供对 Nacos 和 Sentinel 的监控信息，包括节点数、服务数、CPU/内存用量、JVM 线程数、http 请求总耗时等多个维度的信息。

查看组件监控的步骤如下：

1. 进入微服务引擎模块，点击目标注册中心的名称。

    ![点击名称](../../../images/monitor01.png)

2. 在左侧导航栏点击`监控` -> `组件监控`。

    ![导航栏](../../../images/monitor02.png)

3. 点击 `Naocs 实例`页签即可查看 Nacos 实例的监控信息。

    > 下拉页面可查看请求耗时、请求次数等统计详情。

    ![查看信息](../../../images/monitor03.png)

4. 点击 `Sentinel 实例`页签即可查看 Sentinel 实例的监控信息。

   > 下拉页面可查看请求耗时、请求次数、负载等统计详情。

   ![查看信息](../../../images/monitor04.png)

## 组件监控指标说明

**Nacos 实例**

| 指标             | 含义                                                                                                       |
| :--------------- | :--------------------------------------------------------------------------------------------------------- |
| 节点数           | Nacos 的节点个数。                                                                                         |
| 服务数           | 注册到 Nacos 的服务总数。                                                                                  |
| ip 个数          | 注册到 Nacos 的服务实例的数量。                                                                            |
| 配置数           | Nacos 中的配置总数。                                                                                       |
| 配置长连接数     | 建立和保持与 Nacos 服务器之间的长时间连接的数。                                                            |
| 读配置统计数     | 对配置项进行读取操作的统计数。                                                                             |
| cpu              | Nacos 实例的 cpu 使用率。                                                                                  |
| 内存             | Nacos 实例的内存使用率。                                                                                   |
| JVM 线程数       | Nacos 实例的 jvm 中正在运行的线程数。                                                                      |
| 系统负载         | Nacos 的系统负载。                                                                                         |
| 配置水平通知耗时 | 进行配置变更时，将配置更改通知到所有订阅该配置的客户端所花费的时间。                                       |
| http 请求总耗时  | 在处理一个 HTTP 请求的整个过程中所消耗的时间，包括发送请求、服务器处理请求、返回响应等各个环节的时间总和。 |
| http 请求次数    | 在某一时间段内客户端向 Nacos 服务器发送的 HTTP 请求的总次数                                                |
| 服务平均推送耗时 | 在 Nacos 服务注册和发现过程中，将服务信息推送给所有订阅该服务的客户端所花费的平均时间                      |
| http 请求总耗时  | 在处理一个 HTTP 请求的整个过程中所消耗的时间，包括发送请求、服务器处理请求、返回响应等各个环节的时间总和   |
| 配置长连接数     | 建立和保持与 Nacos 服务器之间的长时间连接的数。                                                            |
| 系统负载         | Nacos 的系统负载。                                                                                         |
| http 请求次数    | 在某一时间段内客户端向 Nacos 服务器发送的 HTTP 请求的次数。                                                |
| 角色状态         | Nacos 服务器中各个节点的角色状态信息。                                                                     |
| 服务平均推送耗时 | 在 Nacos 服务注册和发现过程中，将服务信息推送给所有订阅该服务的客户端所花费的平均时间。                    |
| 服务最大推送耗时 | 在 Nacos 服务注册和发现过程中，将服务信息推送给所有订阅该服务的客户端所花费的平均时间。                    |
| 读写配置统计     | 对 Nacos 系统中配置读取和写入操作进行统计和记录的过程。                                                    |
| 健康检查         | Nacos 服务的健康检查。                                                                                     |

**Sentinel 实例**

| 指标                   | 含义                                                                    |
| :--------------------- | :---------------------------------------------------------------------- |
| 进程启动时长           | Sentinel 实例的启动时长                                                 |
| 进程启动时间           | Sentinel 实例的启动时间                                                 |
| 堆内存使用率           | 堆内存已被分配和使用的百分比                                            |
| 非堆内存使用率         | 非堆内存已被分配和使用的百分比                                          |
| QPS（平均 1 分钟）        | Sentinel 的 QPS                                                         |
| 错误数（平均 1 分钟）     | Sentinel 的每分钟的错误数(返回码为 5xx)                                 |
| 请求耗时（平均 1 分钟）   | Sentinel 的每分钟的请求耗时(返回码为 5xx)                               |
| 饱和度                 | Tomcat 服务器中当前正在忙碌处理请求的线程数                             |
| CPU 使用率             | 系统 CPU 使用率                                                         |
| Load                   | 系统负载                                                                |
| 线程数                 | 线程数                                                                  |
| 各状态线程数           | 各种状态线程统计                                                        |
| Logback 日志数         | Logback 日志数                                                          |
| 文件描述符             | 文件描述符                                                              |
| 堆内存                 | 堆内存                                                                  |
| 非堆内存               | 非堆内存                                                                |
| 总内存                 | 总内存                                                                  |
| JVM 进程内存           | JVM 进程内存                                                            |
| Eden Space             | 伊甸园区                                                                |
| Survivor Space         | 幸存者区                                                                |
| Tenured Gen            | 老年代                                                                  |
| Metaspace              | 元空间                                                                  |
| Compressed Class Space | 压缩类空间                                                              |
| Code Cache             | 代码缓存区                                                              |
| Direct Buffers         | 直接缓冲区                                                              |
| Mapped Buffers         | 映射缓冲区                                                              |
| GC 次数                | JVM 垃圾回收暂停时间变化速率                                            |
| GC 暂停时间            | JVM 垃圾回收时间                                                        |
| 内存分配/晋升          | JVM 分配的内存字节数的变化速率/JVM 垃圾回收所提升的内存字节数的变化速率 |
| 已加载的类的数量       | 当前已加载的类的数量                                                    |
| 加载类数量变化         | 已加载的类数量的增量                                                    |
